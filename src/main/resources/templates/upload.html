

<html layout:decorate="~{layout}">
<head>

<script src="/jquery-3.6.3.min.js"></script>
<script>
$(document).ready(function() {
  // 행 추가 버튼에 대한 클릭 이벤트 핸들러 등록
  $("#myTable").on("click", ".addRow", function() {
    // 새로운 행을 생성합니다.
    var newRow = $("<tr>");
    // 각 셀에 입력한 값을 가져와서 추가합니다.
    var size = $("<td>").html('<select class="size form-select form-select-sm" name="sizeList" aria-label=".form-select-lg example"><option value=""></option><option value="S">S</option><option value="M">M</option><option value="L">L</option><option value="XL">XL</option></select>');
    newRow.append(size);

    var color = $("<td>").html('<select class="color form-select form-select-sm" name="colorList" aria-label=".form-select-lg example"><option value=""></option><option value="Red">Red</option><option value="Blue">Blue</option><option value="Green">Green</option><option value="Yellow">Yellow</option><option value="Black">Black</option><option value="Gray">Gray</option></select>');
    newRow.append(color);

    var quantity = $("<td>").html('<input type="number" class="quantity" name="sellCountList" value="0">');
    newRow.append(quantity);


    var deleteRowButton = $("<td>").html('<intput type="button"  class="deleteRow btn btn-outline-danger">Delete</button>');
    newRow.append(deleteRowButton);

    // 새로운 행을 마지막 행으로 추가합니다.
    $("#myTable tbody").append(newRow);
  });

  // 행 삭제 버튼에 대한 클릭 이벤트 핸들러 등록
  $("#myTable").on("click", ".deleteRow", function() {
    // 현재 행을 삭제합니다.
    $(this).closest("tr").remove();
  });
});
</script>

<script>
function addImage() {
  // 새로운 이미지 입력 필드와 삭제 버튼을 감싸는 div를 생성
  var newImgDiv = document.createElement("div");
  newImgDiv.className = "img-div";
  newImgDiv.innerHTML = '<label for="img"></label><input style="width:400px;" type="file" id="inputGroupFile04" name="imgfile" accept="image/*" class="form-control" aria-describedby="inputGroupFileAddon04" aria-label="Upload" ><input type="button" value="Delete" onclick="removeImage(this)" class="btn btn-outline-danger">';
  
  // 새로운 이미지 입력 필드를 기존의 필드들 바로 밑에 추가
  var imgContainer = document.getElementById("plusImg");
  imgContainer.parentNode.insertBefore(newImgDiv, imgContainer.nextSibling);
}

function removeImage(btn) {
  // 삭제 버튼이 속한 div를 찾아서 삭제
  var imgDiv = btn.parentNode;
  imgDiv.parentNode.removeChild(imgDiv);
}
</script>
</head>
<body>

<div layout:fragment="content">
<div style="width:500px; margin:auto; margin-top:20px;">
<form th:object="${itemAndImgDto}" th:action="@{/shop/create}" method="POST" enctype="multipart/form-data">

 <label for="subject" style="width:110px;text-align:center" class="input-group-text" id="inputGroup-sizing-sm">Subject</label>
  <input type="text" id="subject" name="subject" required class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
  <br>
 
<label for="categoryName1" style="width:110px;text-align:center" class="input-group-text" id="inputGroup-sizing-sm">Category 1</label>
<select id="categoryName1" name="categoryName1" required class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
  <option value="categoryName1" >Select a category</option>
  <option th:each="category : ${T(com.himedia.item.entity.enums.CategoryEnum1).values()}"
          th:value="${category.name()}"
          th:text="${category.name()}"></option>
</select>
<br>
<label for="categoryName2" style="width:110px;text-align:center" class="input-group-text" id="inputGroup-sizing-sm">Category 2</label>
<select id="categoryName2" name="categoryName2" required class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
  <option value="CategoryName2">Select a category</option>
  <option th:each="category : ${T(com.himedia.item.entity.enums.CategoryEnum2).values()}"
          th:value="${category.name()}"
          th:text="${category.name()}"></option>
</select>
<br>
  <label for="price" style="width:110px;text-align:center" class="input-group-text" id="inputGroup-sizing-sm">Price</label>
  <input type="number" id="price" name="price" required class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
  <br>
<div id="plusImg" style="margin-bottom:10px; width:500px" class="input-group">
  <label for="img" style="width:120px;" class="input-group-text">Image </label>
  <input type="file" id="inputGroupFile04" name="imgfile" accept="image/*" class="form-control" aria-describedby="inputGroupFileAddon04" aria-label="Upload" >
  <input type="button" name="plusImg" value="img+" onclick="addImage()" id="inputGroupFileAddon04" class="btn btn-outline-secondary">
</div>

  
<table id="myTable" style="margin-top:10px;">
  <thead>
    <tr>
      <th>Size</th>
      <th>Color</th>
      <th>Quantity</th>
    </tr>
  </thead>
  <tbody >
    <tr>
      <td>
        <select class="size form-select form-select-sm" name="sizeList" aria-label=".form-select-lg example">
          <option value=""></option>
          <option value="S">S</option>
          <option value="M">M</option>
          <option value="L">L</option>
          <option value="XL">XL</option>
        </select>
      </td>
      <td>
        <select class="color form-select form-select-sm" name="colorList" aria-label=".form-select-lg example">
          <option value=""></option>
          <option value="Red">Red</option>
          <option value="Blue">Blue</option>
          <option value="Green">Green</option>
          <option value="Yellow">Yellow</option>
          <option value="Black">Black</option>
          <option value="Gray">Gray</option>
        </select>
      </td>
      <td><input type="number" class="quantity" value="0" name="sellCountList"></td>
      <td><input type="button" class="addRow btn btn-outline-dark" value="+"></button></td>
    </tr>
  </tbody>
</table>
<button type="submit" style="display:block; margin:auto; margin-top:20px;" class="btn btn-secondary">상품 등록</button>
</form>



</div>
</div>
</body>
</html>